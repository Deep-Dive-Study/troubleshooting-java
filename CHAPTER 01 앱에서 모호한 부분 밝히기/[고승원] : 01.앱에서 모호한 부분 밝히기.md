# chapter1 앱에서 모호한 부분 밝히기

**디버깅의 목적**

- 문제점 발견
- 소프트웨어 이해
- 기술 습득

# 1.2 일반적인 코드 조사 시나리오

### 시나리오 1 : 단순 케이스

단순 케이스는 브레이크포인트를 찍어 변수의 변화를 체크할 수 있다.

### 시나리오 2 : 어디서부터 디버깅을 시작해야 할까?

프로파일러는 앱이 실행되는 동안 어떤 코드가 실행되는지 식별하는 도구이다.

### 시나리오 3 : 멀티스레드 앱

멀티 스레드는 앱 실행 시점마다 다르게 동작할 수 있다. 이를 하이젠버그라고 한다.

대안으로는 로깅, 스레드수 제한이 있다.

### 시나리오 4 : 주어진 서비스에 잘못된 호출 보내기

외부 시스템과 상호작용 하는 부분이 잘못되었다면, 앱의 요청 코드를 찾아야 한다.

프로파일러를 통해 어떤 시점에 어떤 코드가 작동되는지 알아보자.

앱이 요청하는 위치를 특정하기 어렵다면, 외부 앱으로 요청하는 부분을 스텁으로 바꾸면 된다.

## 1.2.2 특정 기술을 습득한다.

특정 기술을 습득할 때 문서를 통해 학습하는 것도 좋지만, 디버깅을 통해 코드를 직접 들여다본다면 좋은 학습이 될 것이다.

## 1.2.3 속도 저하 이유를 알아낸다.

먼저 속도 저하 ≠ 성능이다.

앱이 주어진 트리거에 뒤늦게 반응하는 속도 저하 현상은 성능 문제의 한 부류이다.

예) 좀비 스레드가 발생해 휴대폰 배터리가 빠르게 소모되는 현상도 성능문제중 하나이다.

가장 흔히 맞닥뜨리는 속도 저하 문제는 프로파일러를 통해 어떤 코드가 얼마나 시간을 소비하는지 확인할 수 있다.

## 1.2.4 앱 크래시가 발생하는 이유를 이해한다.

앱 크래시 현상은 재현하기 어려워 조사하기 까다롭다.

앱 크래시 현상은 보통 앱이 두 가지 형태로 일어난다.

- 앱이 완전히 멈춘다
    
    복구 불가능한 에러가 발생했단 뜻이다. 문제를 조사해야 한다. (OOM엔 힙덤프)
    
- 실행은 되지만 응답하지 않는다
    
    이런 경우 스레드 덤프를 통해 무슨 일어나고 있는지 분석해야 한다. (각 스레드의 상태와 스레드가 어떤 일을 하는지 알 수 있다.)
    

# 1.3 이 책에서 배울 내용

- 디버거를 통해 앱 로직 이해 및 문제 해결 접근법 적용
- 프로파일러를 사용해 앱에 숨겨진 기능을 조사하고 디펜던시를 이해한다
- 코드를 분석하여 앱 또는 앱 디펜던시 중 하나가 어떤 문제를 일으키는지 확인한다
- 메모리 스냅샷을 통해 데이터를 조사하고 제를 확인한다.
- 로깅을 통해 앱 동작의 문제점을 찾고 보안 취약 요소를 살핀다.
- 원격 디버깅을 통해 다른 상황에서 확인 못하는 문제를 파악한다.
- 조사 속도를 높이기 위해 가장 적절한 앱 조사 기법을 선택한다.

# 요약

- 올바른 조사 기법
- 학습 효과를 높이는 좋은 방법 이해
- 문제가 되는 케이스 재현 및 조사
