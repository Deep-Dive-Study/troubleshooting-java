# Chapter 1 - 앱에서 모호한 부분 밝히기
 - 주요 내용
   - 코드 조사 기법에 대한 이해

## 1.1 앱을 더 쉽게 이해하는 방법
- **`코드 조사`** 란?
  - **`소프트웨어 기능의 특정한 동작을 분석하는 프로세스`**
  - 문제를 찾아내는 것뿐만 아니라 구조가 복잡한 요즘 앱의 작동 방식을 이해하거나 새로운 기술을 배우기 위한 목적도 있음

- **`코드 조사 기법을 알아야 하는 이유?`**
  - 개발자는 문제를 해결하고, 새로운 기능을 구현하고, 새로운 기술을 터득하는데 시간의 대부분을 할애함
    - **`문제의 근본 원인 찾기(해결)`**
    - **`기존 로직을 이해하여 새로운 기능으로 확장하기(기능구현, 리팩터링)`**
    - **`새로운 프레임워크,기술 배우기(검토)`**
    - 테스트, 문서 작성, 등
  
  - 코드를 작성하는 시간 보다도 **소프트웨어의 작동 방식을 이해하는 데 시간이 더 소요** 됨
    - 코드를 이해하는 것은 단순히 글을 읽는 것과는 다름 -> 거대한 미로를 탐험하는 느낌

  - 따라서, **`생산성을 높이기 위해서는 코드를 빠르게 파악하는 것이 중요`** 하며, 이를 위한 효율적인 조사 기법을 이해하고 연마할 필요성이 있음
  
  - 보통 이러한 조사 기법을 **`디버깅`** (문제를 찾고 해결하는 과정) 이라고 표현하지만, 이는 여러 도구들 중 하나
  - 개발자는 코드의 작동 방식을 분석하는 다양한 목적으로 디버깅을 수행함
    <img width="447" alt="CleanShot 2024-05-14 at 15 12 37@2x" src="https://github.com/Deep-Dive-Study/troubleshooting-java/assets/99165624/5493555d-6c53-427c-90aa-8ae3fc2b65bf">

    - 디버깅과 디버거 도구를 사용하는 것은 다름

## 1.2 일반적인 코드 조사 시나리오
- **`어떤 코드나 기능이 예상과 다른 결과를 내는 경우`**
- **`사용하는 라이브러리나 기술이 어떻게 작동하는지 이해해야 하는 경우`**
- **`앱 속도 저하 같은 성능 이슈의 원인을 알아야 하는 경우`**
- **`앱이 갑자기 중단된 원인을 찾아야 하는 경우`**

### 1.2.1 예상과 다른 아웃풋의 원인을 밝힌다
#### 시나리오 1: 단순 케이스
- 디버거를 도구를 활용하여 `코드 실행을 따라가보는 것이 가장 간단한 분석`
- 브레이크 포인트와 같이 디버거 제공해주는 기능을 통해 변수의 변화, 로직의 흐름을 수동으로 확인하며 문제를 해결

#### 시나리오 2: 어디서 부터 디버깅을 시작해야 할까?
- 프로파일러를 통해 브레이크 포인트를 추가할 만한 `코드 라인의 범위를 좁혀나가야 함`.
 - 프로파일러란? **`앱이 실행되는 동안 어떤 코드가 실행되는지 식별하는 도구`**

#### 시나리오 3: 멀티스레드 앱
- 멀티스레드 아키텍처 기반의 앱은 디버거를 사용하는 시점마다 앱이 다르게 작동할 수 있음
  - 이를 `하이젠 버그`라고 함
  - 스레드 간섭을 일으키는 순간마다 작동 방식이 달라질 수 있기 때문에 **단순 디버거를 통해서는 원인을 파악하기 어려움**
  - 테스트 코드를 디버깅할 때 간혹 겪는 이슈였음

    <img width="397" alt="CleanShot 2024-05-14 at 15 39 35@2x" src="https://github.com/Deep-Dive-Study/troubleshooting-java/assets/99165624/b5f973c2-549e-46c1-a493-49ce5c4dd0fe">

  - 이러한 경우에는 다른 방식(앱에서 로깅, 디버거에서 스레드 수 1개로 조정,등)을 통해서 파악해야함

#### 시나리오 4: 주어진 서비스에 잘못된 호출 보내기
- 다른 시스템의 컴포넌트나 외부 시스템과 올바르게 상호작용하지 못한 경우에는 다른 앱을 스텁(Stub)으로 변경하여 동작을 테스트 해보면 된다. 

  <img width="386" alt="CleanShot 2024-05-14 at 15 41 31@2x" src="https://github.com/Deep-Dive-Study/troubleshooting-java/assets/99165624/cedef24f-d7c3-458a-b2c7-7e03df9db877">
  <img width="420" alt="CleanShot 2024-05-14 at 15 43 08@2x" src="https://github.com/Deep-Dive-Study/troubleshooting-java/assets/99165624/c9a75ded-e7ed-4f5a-826f-7cfa73042b05">

### 1.2.2 특정 기술을 습득한다
- 코드를 분석하는 조사 기법의 또 다른 용도는 특정 기술의 작동원리를 배우는 것
- 디버깅을 통해 차근차근 작동 원리를 파악하며 공부한다 

### 1.2.3 속도 저하 이유를 알아낸다
- 성능 이슈의 경우, 보통 프로파일러를 통해 분석
  - 커맨드 별 실행 시간을 알 수 있음
  - 어떤 지점이 병목인지 범위를 좁혀나가면서 문제점(지점)을 찾아야 함  

### 1.2.4 앱 크레시가 발생하는 이유를 이해한다
- 보통 앱 크래시, 중단 이슈의 경우 재현하기 어려운 경우가 많음
- 특정 시점에 어떤 상황이었는지 알기 위해, 힙 덤프(heap dump) 나 스레드 덤프(thread dump)를 활용

## 1.3 이 책에서 배울 내용
- 다양한 코드 조사 기법에 대한 활용 가이드

  <img width="439" alt="CleanShot 2024-05-14 at 15 23 16@2x" src="https://github.com/Deep-Dive-Study/troubleshooting-java/assets/99165624/c0bc7ec6-49ee-45eb-9426-aeb550217f45">

## 요약
- 개발자 생산성을 높이기 위해서는 코드가 어떻게 동작하는지를 빠르게 이해하는 것이 중요
- 이를 위한 여러 도구 및 기법을 알고 적절한 상황에 올바르게 적용할 수 있어야 함 (조합, 응용)

  <img width="441" alt="CleanShot 2024-05-14 at 15 24 36@2x" src="https://github.com/Deep-Dive-Study/troubleshooting-java/assets/99165624/332c22af-3045-449a-9195-365e421cb06c">
